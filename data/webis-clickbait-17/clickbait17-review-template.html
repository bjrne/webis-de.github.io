<div class="col-12 my-1">
   <div class="row">
      <div class="col-auto">
         <span class="judgements"></span>
      </div>
      <div class="col-auto">
         <button class="btn btn-primary btn-sm collapses" type="button">expand</button>
      </div>
   </div>
   <div class="row mt-1 to_be_collapsed" style="display: none">
      <div class="col">
         <table class="table table-striped">
            <tbody class="tweets">
            </tbody>
         </table>
      </div>
   </div>
   <div data-inject_input_forms></div>
</div>
<script>
   function create_judgements(list_judgements)
   {
       result = '';
       for (var i = 0; i < list_judgements.length; i++) {
           if(list_judgements[i] < 0.25)
           {
               result += '<div style="margin-right: 5px; margin-left: 5px; display: inline-block; width: 30px; height: 30px; background-color: green" title="Score: 0"></div>'
           } else if(list_judgements[i] < 0.5) {
               result += '<div style="margin-right: 5px; margin-left: 5px; display: inline-block; width: 30px; height: 30px; background-color: yellow" title="Score: 1/3"></div>'
           } else if(list_judgements[i] < 0.75) {
               result += '<div style="margin-right: 5px; margin-left: 5px; display: inline-block; width: 30px; height: 30px; background-color: orange" title="Score: 2/3"></div>'
           } else {
               result += '<div style="margin-right: 5px; margin-left: 5px; display: inline-block; width: 30px; height: 30px; background-color: red" title="Score: 1"></div>'
               
           }
           list_judgements[i]
       }
       return result;
   }
   function create_tweets(question)
   {
       list_tweets = []
       for (var i = 0; i < 6; i++) {
           list_tweets.push({
               text: question['tweet'+i+'_text'],
               media: JSON.parse(question['tweet'+i+'_media']),
           });
       }
   
       result = '';
   
       for (var i = 0; i < list_tweets.length; i++) {
           var tweet = list_tweets[i];
           result += '<tr>';
           result += '<td>'+tweet.text+'</td>';
           result += '<td class="py-1">';
   
           for (var z = 0; z < tweet.media.length; z++) {
               result += '<img src="'+tweet.media[z]+'" style="height: 40px; width: auto">';
           }
   
           result += '</td>';
           result += '</tr>';
       }
   
       return result;
   }
   
   assignment_wrapper.find('.collapses').data('id_assignment', id_assignment);
   assignment_wrapper.find('.to_be_collapsed').data('id_assignment', id_assignment);
   
   // var that = assignment_wrapper.find('.to_be_collapsed');
   assignment_wrapper.find('.collapses').on('click', function() {
       // console.log();
       // $(this).data('id_assignment').toggle();
       console.log($(this).data('id_assignment'))
       var id_assignment = $(this).data('id_assignment')
       // console.log($('.to_be_collapsed[id_assignment="'+$(this).data('id_assignment')+'"]'))
       $('.to_be_collapsed').each(function() {
           if(id_assignment == $(this).data('id_assignment')) {
               $(this).toggle();
               return false;
           }
       });
       // assignment_wrapper.find('.to_be_collapsed.'+id_assignment).toggle();
   });
   
   var input_text = answer.input1;
   assignment_wrapper.find('.input_text').text(input_text);
   var html_judgements = create_judgements([
       answer.is_clickbait_0,
       answer.is_clickbait_1,
       answer.is_clickbait_2,
       answer.is_clickbait_3,
       answer.is_clickbait_4,
       answer.is_clickbait_5,
   ]);
   
   assignment_wrapper.find('.tweets').html(create_tweets(question));
   
   console.log(question);
   console.log(answer);
   assignment_wrapper.find('.judgements').html(html_judgements);
</script>
